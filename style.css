:root { --gold: #ffd700; --rose: #ff4d6d; }
body { 
    margin: 0; 
    background: #000; 
    overflow: hidden; 
    font-family: 'Arial Black', sans-serif; 
    touch-action: manipulation;
}

#starfield { position: fixed; width: 100vw; height: 100vh; background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%); z-index: -1; }
canvas { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none; }

/* Gift Section */
#gift-container { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 100; }
#gift-wrapper { cursor: pointer; position: relative; z-index: 110; text-align: center; }
#gift-lid { font-size: 80px; position: absolute; top: -40px; left: 10px; transition: 1s ease-in-out; }
#gift-box { font-size: 100px; }
.gift-hint { background: #fff; padding: 10px 20px; border-radius: 20px; margin-top: 20px; color: #000; font-weight: bold; }
.open-lid #gift-lid { transform: translateY(-300px) rotate(45deg); opacity: 0; }

#delivery-bike { position: absolute; font-size: 120px; left: -400px; top: 40%; display: none; z-index: 105; transform: scaleX(-1); }
.bike-go { display: block !important; animation: bikeSlow 6s ease-in-out forwards; }
@keyframes bikeSlow { 0% { left: -400px; } 100% { left: 125%; } }

/* 3D Gallery */
#final-scene { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; perspective: 1500px; z-index: 10; }
.photo-display { width: 250px; height: 300px; position: relative; transform-style: preserve-3d; animation: rotateGallery 30s infinite linear; }
.floating-panel { position: absolute; width: 200px; height: 260px; border: 4px solid #fff; box-shadow: 0 0 15px var(--rose); overflow: hidden; cursor: pointer; transition: 0.3s; background: #fff; }
.floating-panel img { width: 100%; height: 100%; object-fit: cover; }

/* Positions */
.p1 { transform: rotateY(0deg) translateZ(450px); }
.p2 { transform: rotateY(60deg) translateZ(450px); }
.p3 { transform: rotateY(120deg) translateZ(450px); }
.p4 { transform: rotateY(180deg) translateZ(450px); }
.p5 { transform: rotateY(240deg) translateZ(450px); }
.p6 { transform: rotateY(300deg) translateZ(450px); }

@keyframes rotateGallery { from { transform: rotateY(0deg); } to { transform: rotateY(360deg); } }

/* Mobile View Fixes */
@media (max-width: 600px) {
    .photo-display { width: 140px; height: 180px; }
    .floating-panel { width: 120px; height: 160px; border-width: 3px; }
    .p1 { transform: rotateY(0deg) translateZ(160px); }
    .p2 { transform: rotateY(60deg) translateZ(160px); }
    .p3 { transform: rotateY(120deg) translateZ(160px); }
    .p4 { transform: rotateY(180deg) translateZ(160px); }
    .p5 { transform: rotateY(240deg) translateZ(160px); }
    .p6 { transform: rotateY(300deg) translateZ(160px); }
    .love-you-text { font-size: 1.8rem !important; }
}

/* Rain & Burst Effects */
.rain-item { position: fixed; top: -50px; pointer-events: none; z-index: 5; animation: fall linear forwards; }
.pop-item { position: fixed; pointer-events: none; z-index: 10001; font-size: 2rem; animation: popUp 1.2s ease-out forwards; }

@keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
@keyframes popUp { 
    0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
    100% { transform: translate(-50%, -200px) scale(2) rotate(180deg); opacity: 0; }
}

.love-you-text {
    font-size: 3rem;
    /* 1. Extended background width for smoother animation */
    background: linear-gradient(to right, var(--gold), #fff, var(--rose), var(--gold));
    background-size: 200% auto;
    
    /* 2. Critical for visibility: Ensures background shows through text */
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    
    /* 3. Added standard animation */
    animation: shine 3s linear infinite;
    
    margin-top: 40px;
    text-align: center;
    font-weight: bold; /* Optional: Makes the gradient pop more */
}

/* 4. The keyframes to make the gradient move */
@keyframes shine {
    to {
        background-position: 200% center;
    }
}

#fullview-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 10000; display: none; justify-content: center; align-items: center; flex-direction: column; padding: 20px; }
.full-img-zoom { max-width: 100%; max-height: 65vh; border: 6px solid #fff; padding: 4px; background: #fff; box-shadow: 0 0 30px var(--gold); }
#inner-quote { color: white; margin-top: 15px; text-align: center; font-style: italic; }